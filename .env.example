# =============================================================================
# What The Game - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------
DATABASE_URL=postgresql://localhost/what_the_game_development
# For production, use a more secure connection string:
# DATABASE_URL=postgresql://username:password@host:5432/database_name

# -----------------------------------------------------------------------------
# RAILS CONFIGURATION
# -----------------------------------------------------------------------------
RAILS_ENV=development
# SECRET_KEY_BASE will be auto-generated, or set manually for production:
# SECRET_KEY_BASE=your_very_long_secret_key_here

# Server Configuration
PORT=3000
RAILS_MAX_THREADS=5

# -----------------------------------------------------------------------------
# AI SERVICE CONFIGURATION
# -----------------------------------------------------------------------------
# Choose one or both AI providers. The app will use the first available.

# OpenAI (GPT-4, GPT-3.5)
# Get your API key from: https://platform.openai.com/api-keys
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4-turbo-preview
# Alternative models: gpt-3.5-turbo, gpt-4, gpt-4-turbo
OPENAI_MAX_TOKENS=2000
OPENAI_TEMPERATURE=0.7

# Anthropic (Claude)
# Get your API key from: https://console.anthropic.com/
ANTHROPIC_API_KEY=
ANTHROPIC_MODEL=claude-3-sonnet-20240229
# Alternative models: claude-3-opus-20240229, claude-3-haiku-20240307
ANTHROPIC_MAX_TOKENS=2000
ANTHROPIC_TEMPERATURE=0.7

# AI Feature Flags
ENABLE_AI_RECOMMENDATIONS=true
ENABLE_AI_CONVERSATIONS=false  # Phase 2 feature
ENABLE_AI_INSIGHTS=false       # Phase 2 feature
ENABLE_NATURAL_QUERIES=false   # Phase 2 feature

# AI Cost Management
AI_DAILY_LIMIT_FREE_TIER=10    # Requests per day for free users
AI_DAILY_LIMIT_PREMIUM=100     # Requests per day for premium users

# -----------------------------------------------------------------------------
# GAME PLATFORM APIS - STEAM
# -----------------------------------------------------------------------------
# Get your Steam API key from: https://steamcommunity.com/dev/apikey
STEAM_API_KEY=
STEAM_API_BASE_URL=https://api.steampowered.com
STEAM_RATE_LIMIT=100000  # Daily API call limit

# -----------------------------------------------------------------------------
# GAME PLATFORM APIS - GOG (Good Old Games)
# -----------------------------------------------------------------------------
# Register your app at: https://devportal.gog.com/
GOG_CLIENT_ID=
GOG_CLIENT_SECRET=
GOG_REDIRECT_URI=http://localhost:3000/auth/gog/callback
GOG_API_BASE_URL=https://api.gog.com

# -----------------------------------------------------------------------------
# GAME PLATFORM APIS - EPIC GAMES STORE
# -----------------------------------------------------------------------------
# Register your app at: https://dev.epicgames.com/
EPIC_CLIENT_ID=
EPIC_CLIENT_SECRET=
EPIC_REDIRECT_URI=http://localhost:3000/auth/epic/callback
EPIC_API_BASE_URL=https://api.epicgames.dev

# -----------------------------------------------------------------------------
# GAME METADATA SERVICES
# -----------------------------------------------------------------------------

# IGDB (Internet Game Database)
# Register at: https://api.igdb.com/
IGDB_CLIENT_ID=
IGDB_CLIENT_SECRET=
IGDB_API_BASE_URL=https://api.igdb.com/v4

# RAWG Video Games Database
# Get API key at: https://rawg.io/apidocs
RAWG_API_KEY=
RAWG_API_BASE_URL=https://api.rawg.io/api

# HowLongToBeat (unofficial API)
# Self-hosted or third-party service
HLTB_API_URL=
HLTB_API_KEY=

# -----------------------------------------------------------------------------
# FUTURE PLATFORM INTEGRATIONS (Phase 3)
# -----------------------------------------------------------------------------

# Xbox Game Pass / Microsoft
XBOX_CLIENT_ID=
XBOX_CLIENT_SECRET=
XBOX_REDIRECT_URI=http://localhost:3000/auth/xbox/callback

# PlayStation Network
PSN_CLIENT_ID=
PSN_CLIENT_SECRET=
PSN_REDIRECT_URI=http://localhost:3000/auth/psn/callback

# Nintendo eShop
NINTENDO_CLIENT_ID=
NINTENDO_CLIENT_SECRET=

# Itch.io
ITCHIO_API_KEY=

# Humble Bundle
HUMBLE_API_KEY=

# -----------------------------------------------------------------------------
# CACHING & PERFORMANCE
# -----------------------------------------------------------------------------

# Redis (Optional - for production scaling)
REDIS_URL=redis://localhost:6379/0
# For production: redis://username:password@host:6379/0

# Cache Configuration
CACHE_EXPIRES_GAMES=604800        # 7 days in seconds
CACHE_EXPIRES_LIBRARY=21600       # 6 hours in seconds
CACHE_EXPIRES_RECOMMENDATIONS=86400  # 24 hours in seconds

# -----------------------------------------------------------------------------
# BACKGROUND JOBS
# -----------------------------------------------------------------------------

# Solid Queue Configuration (Rails 8 default)
# Jobs are stored in the database by default
# For production, consider separate database or Redis

# Job Priorities
JOB_PRIORITY_CRITICAL=1
JOB_PRIORITY_HIGH=5
JOB_PRIORITY_NORMAL=10
JOB_PRIORITY_LOW=20

# Library Sync Schedule (cron format)
SYNC_SCHEDULE_STEAM="0 */6 * * *"    # Every 6 hours
SYNC_SCHEDULE_GOG="0 */6 * * *"
SYNC_SCHEDULE_EPIC="0 */6 * * *"

# -----------------------------------------------------------------------------
# EMAIL CONFIGURATION (Future - for user notifications)
# -----------------------------------------------------------------------------
SMTP_ADDRESS=smtp.example.com
SMTP_PORT=587
SMTP_DOMAIN=example.com
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_AUTHENTICATION=plain
SMTP_ENABLE_STARTTLS_AUTO=true

# Email Settings
FROM_EMAIL=noreply@whatthegame.com
SUPPORT_EMAIL=support@whatthegame.com

# -----------------------------------------------------------------------------
# EXTERNAL SERVICES (Future)
# -----------------------------------------------------------------------------

# Error Tracking (Sentry, Honeybadger, etc.)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Performance Monitoring (New Relic, Scout, etc.)
NEW_RELIC_LICENSE_KEY=
NEW_RELIC_APP_NAME=WhatTheGame

# Analytics (Google Analytics, Mixpanel, etc.)
GOOGLE_ANALYTICS_ID=
MIXPANEL_TOKEN=

# CDN (CloudFront, Cloudflare, etc.)
CDN_URL=

# File Storage (AWS S3, CloudFlare R2, etc.)
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
AWS_S3_BUCKET=

# -----------------------------------------------------------------------------
# VOICE ASSISTANT (Phase 3)
# -----------------------------------------------------------------------------

# Speech Recognition (Whisper API, Google Speech, etc.)
WHISPER_API_KEY=

# Text-to-Speech (ElevenLabs, Google TTS, etc.)
ELEVENLABS_API_KEY=
ELEVENLABS_VOICE_ID=

# -----------------------------------------------------------------------------
# PAYMENT & SUBSCRIPTION (Phase 3)
# -----------------------------------------------------------------------------

# Stripe
STRIPE_PUBLISHABLE_KEY=
STRIPE_SECRET_KEY=
STRIPE_WEBHOOK_SECRET=

# Subscription Tiers
PREMIUM_MONTHLY_PRICE_ID=
PREMIUM_YEARLY_PRICE_ID=

# -----------------------------------------------------------------------------
# SECURITY & AUTHENTICATION
# -----------------------------------------------------------------------------

# JWT Secret (if using JWT for API auth)
JWT_SECRET=

# Session Configuration
SESSION_TIMEOUT=86400  # 24 hours in seconds

# OAuth Encryption Key (for encrypting tokens)
OAUTH_ENCRYPTION_KEY=

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------

# Platform Integrations
ENABLE_STEAM_INTEGRATION=true
ENABLE_GOG_INTEGRATION=false
ENABLE_EPIC_INTEGRATION=false
ENABLE_XBOX_INTEGRATION=false
ENABLE_PSN_INTEGRATION=false

# Features
ENABLE_SOCIAL_FEATURES=false      # Phase 2
ENABLE_ANALYTICS_DASHBOARD=false  # Phase 2
ENABLE_VOICE_ASSISTANT=false      # Phase 3
ENABLE_MOBILE_APP=false           # Phase 3
ENABLE_PREMIUM_SUBSCRIPTIONS=false # Phase 3

# -----------------------------------------------------------------------------
# DEVELOPMENT & DEBUGGING
# -----------------------------------------------------------------------------

# Logging
LOG_LEVEL=info  # debug, info, warn, error
LOG_FORMAT=json # json or text

# Development Tools
ENABLE_WEB_CONSOLE=true
ENABLE_BULLET=false  # N+1 query detection
ENABLE_RACK_MINI_PROFILER=false

# API Request Logging
LOG_API_REQUESTS=true
LOG_AI_PROMPTS=true  # Log AI prompts and responses for debugging

# -----------------------------------------------------------------------------
# RATE LIMITING
# -----------------------------------------------------------------------------

# API Rate Limits (requests per minute)
RATE_LIMIT_AUTHENTICATED=100
RATE_LIMIT_UNAUTHENTICATED=20

# AI Rate Limits (to control costs)
RATE_LIMIT_AI_PER_USER_DAILY=10    # Free tier
RATE_LIMIT_AI_PER_USER_DAILY_PREMIUM=100  # Premium tier

# -----------------------------------------------------------------------------
# TESTING
# -----------------------------------------------------------------------------

# Test Database
TEST_DATABASE_URL=postgresql://localhost/what_the_game_test

# Use VCR for recording HTTP interactions in tests
VCR_MODE=once  # once, all, none, new_episodes

# Mock AI responses in tests (to avoid API costs)
MOCK_AI_RESPONSES=true

# -----------------------------------------------------------------------------
# PRODUCTION ONLY
# -----------------------------------------------------------------------------

# Force HTTPS
FORCE_SSL=false  # Set to true in production

# Asset Host (CDN)
ASSET_HOST=

# Database Pool Size
DB_POOL=5

# Worker Processes
WEB_CONCURRENCY=2
RAILS_MAX_THREADS=5

# =============================================================================
# END OF CONFIGURATION
# =============================================================================

# Notes:
# - All API keys should be kept secure and never committed to version control
# - In production, use environment variables or a secret management service
# - Review and update rate limits based on your API tier and usage
# - Enable features progressively as they are implemented
# - Monitor API costs, especially for AI services
# - Regularly rotate API keys and secrets
# - Use strong, unique values for encryption keys

# For more information, see:
# - README.md
# - ARCHITECTURE.md
# - DEVELOPMENT.md
